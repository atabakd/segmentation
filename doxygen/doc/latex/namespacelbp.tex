\section{lbp Namespace Reference}
\label{namespacelbp}\index{lbp@{lbp}}


Original code by philipp $<$bytefish\mbox{[}at\mbox{]}gmx\mbox{[}dot\mbox{]}de$>$  


\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
{\footnotesize template$<$typename \+\_\+\+Tp $>$ }\\void \hyperlink{namespacelbp_a7a2d45fdc785282bc110d25495ef78d7}{histogram\+\_\+} (const cv\+::\+Mat \&src, cv\+::\+Mat \&hist, int num\+Patterns)
\begin{DoxyCompactList}\small\item\em Original code by philipp $<$bytefish\mbox{[}at\mbox{]}gmx\mbox{[}dot\mbox{]}de$>$ \end{DoxyCompactList}\item 
{\footnotesize template$<$typename \+\_\+\+Tp $>$ }\\double {\bfseries chi\+\_\+square\+\_\+} (const cv\+::\+Mat \&histogram0, const cv\+::\+Mat \&histogram1)\label{namespacelbp_a7f6233ae8ce09653d048465413e5a40f}

\item 
void {\bfseries spatial\+\_\+histogram} (const cv\+::\+Mat \&src, cv\+::\+Mat \&spatialhist, int num\+Patterns, const cv\+::\+Size \&window, int overlap=0)\label{namespacelbp_a033b381259dbac1e636bf1729abd0d84}

\item 
void {\bfseries spatial\+\_\+histogram} (const cv\+::\+Mat \&src, cv\+::\+Mat \&spatialhist, int num\+Patterns, int gridx=8, int gridy=8, int overlap=0)\label{namespacelbp_afe088914321c9c6210cdb611aa6c2fa9}

\item 
void {\bfseries histogram} (const cv\+::\+Mat \&src, cv\+::\+Mat \&hist, int num\+Patterns)\label{namespacelbp_a1ec08379651e945f526ee485960feb55}

\item 
double {\bfseries chi\+\_\+square} (const cv\+::\+Mat \&histogram0, const cv\+::\+Mat \&histogram1)\label{namespacelbp_abc2c2aedd18a2a6edd9c128c843bb572}

\item 
cv\+::\+Mat {\bfseries histogram} (const cv\+::\+Mat \&src, int num\+Patterns)\label{namespacelbp_ab84f853b680a693ba42f63e32cdbb7b6}

\item 
cv\+::\+Mat {\bfseries spatial\+\_\+histogram} (const cv\+::\+Mat \&src, int num\+Patterns, const cv\+::\+Size \&window, int overlap=0)\label{namespacelbp_a969e1b4575a7bdaf68271e5855b2a3da}

\item 
cv\+::\+Mat {\bfseries spatial\+\_\+histogram} (const cv\+::\+Mat \&src, int num\+Patterns, int gridx=8, int gridy=8, int overlap=0)\label{namespacelbp_abc898ced323b22d8659c5a8a28a805b7}

\item 
{\footnotesize template$<$typename \+\_\+\+Tp $>$ }\\void \hyperlink{namespacelbp_a640337219aa7c2a5326fa41af8269cc5}{O\+L\+B\+P\+\_\+} (const cv\+::\+Mat \&src, cv\+::\+Mat \&dst)
\begin{DoxyCompactList}\small\item\em Original code by philipp $<$bytefish\mbox{[}at\mbox{]}gmx\mbox{[}dot\mbox{]}de$>$ \end{DoxyCompactList}\item 
{\footnotesize template$<$typename \+\_\+\+Tp $>$ }\\void {\bfseries E\+L\+B\+P\+\_\+} (const cv\+::\+Mat \&src, cv\+::\+Mat \&dst, int radius=1, int neighbors=8)\label{namespacelbp_a0a37f5c75a252b844f2a0a53e39d4d1c}

\item 
{\footnotesize template$<$typename \+\_\+\+Tp $>$ }\\void \hyperlink{namespacelbp_a32baee0ff6f7c9703bc16f1e965e7324}{V\+A\+R\+L\+B\+P\+\_\+} (const cv\+::\+Mat \&src, cv\+::\+Mat \&dst, int radius=1, int neighbors=8)
\item 
void {\bfseries O\+L\+BP} (const cv\+::\+Mat \&src, cv\+::\+Mat \&dst)\label{namespacelbp_aa36d3518cf5dfc2287a833598ecd2247}

\item 
void {\bfseries E\+L\+BP} (const cv\+::\+Mat \&src, cv\+::\+Mat \&dst, int radius=1, int neighbors=8)\label{namespacelbp_a7ca5bceb1a229bac0760c527a68e838e}

\item 
void {\bfseries V\+A\+R\+L\+BP} (const cv\+::\+Mat \&src, cv\+::\+Mat \&dst, int radius=1, int neighbors=8)\label{namespacelbp_a0b3e413fbb2c14f3d7e5c99370a6671d}

\item 
cv\+::\+Mat {\bfseries O\+L\+BP} (const cv\+::\+Mat \&src)\label{namespacelbp_a5cfe27bf479d2f8eaf4ff487ef7b6532}

\item 
cv\+::\+Mat {\bfseries E\+L\+BP} (const cv\+::\+Mat \&src, int radius=1, int neighbors=8)\label{namespacelbp_aeaa7fc1cf01cd9093610e6d89a7bb4a3}

\item 
cv\+::\+Mat {\bfseries V\+A\+R\+L\+BP} (const cv\+::\+Mat \&src, int radius=1, int neighbors=8)\label{namespacelbp_a17e665b32c7d6438478deecaa9174afc}

\end{DoxyCompactItemize}


\subsection{Detailed Description}
Original code by philipp $<$bytefish\mbox{[}at\mbox{]}gmx\mbox{[}dot\mbox{]}de$>$ 

\begin{DoxyCopyright}{Copyright}
B\+SD, see L\+I\+C\+E\+N\+SE. 
\end{DoxyCopyright}


\subsection{Function Documentation}
\index{lbp@{lbp}!histogram\+\_\+@{histogram\+\_\+}}
\index{histogram\+\_\+@{histogram\+\_\+}!lbp@{lbp}}
\subsubsection[{\texorpdfstring{histogram\+\_\+(const cv\+::\+Mat \&src, cv\+::\+Mat \&hist, int num\+Patterns)}{histogram_(const cv::Mat &src, cv::Mat &hist, int numPatterns)}}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename \+\_\+\+Tp $>$ void lbp\+::histogram\+\_\+ (
\begin{DoxyParamCaption}
\item[{const cv\+::\+Mat \&}]{src, }
\item[{cv\+::\+Mat \&}]{hist, }
\item[{int}]{num\+Patterns}
\end{DoxyParamCaption}
)}\label{namespacelbp_a7a2d45fdc785282bc110d25495ef78d7}


Original code by philipp $<$bytefish\mbox{[}at\mbox{]}gmx\mbox{[}dot\mbox{]}de$>$ 

\begin{DoxyCopyright}{Copyright}
B\+SD, see L\+I\+C\+E\+N\+SE. 
\end{DoxyCopyright}


Definition at line 27 of file histogram.\+cpp.


\begin{DoxyCode}
27                                                                    \{
28     hist = cv::Mat::zeros(1, numPatterns, CV\_32SC1);
29     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < src.rows; i++) \{
30         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} j = 0; j < src.cols; j++) \{
31             \textcolor{keywordtype}{int} bin = src.at<\_Tp>(i,j);
32             hist.at<\textcolor{keywordtype}{int}>(0,bin) += 1;
33         \}
34     \}
35 \}
\end{DoxyCode}
\index{lbp@{lbp}!O\+L\+B\+P\+\_\+@{O\+L\+B\+P\+\_\+}}
\index{O\+L\+B\+P\+\_\+@{O\+L\+B\+P\+\_\+}!lbp@{lbp}}
\subsubsection[{\texorpdfstring{O\+L\+B\+P\+\_\+(const cv\+::\+Mat \&src, cv\+::\+Mat \&dst)}{OLBP_(const cv::Mat &src, cv::Mat &dst)}}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename \+\_\+\+Tp $>$ void lbp\+::\+O\+L\+B\+P\+\_\+ (
\begin{DoxyParamCaption}
\item[{const cv\+::\+Mat \&}]{src, }
\item[{cv\+::\+Mat \&}]{dst}
\end{DoxyParamCaption}
)}\label{namespacelbp_a640337219aa7c2a5326fa41af8269cc5}


Original code by philipp $<$bytefish\mbox{[}at\mbox{]}gmx\mbox{[}dot\mbox{]}de$>$ 

\begin{DoxyCopyright}{Copyright}
B\+SD, see L\+I\+C\+E\+N\+SE. 
\end{DoxyCopyright}


Definition at line 27 of file lbp.\+cpp.


\begin{DoxyCode}
27                                             \{
28     
29     dst = cv::Mat::zeros(src.rows-2, src.cols-2, CV\_8UC1);
30     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i=1;i<src.rows-1;i++) \{
31         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} j=1;j<src.cols-1;j++) \{
32             \_Tp center = src.at<\_Tp>(i,j);
33             \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} code = 0;
34             code |= (src.at<\_Tp>(i-1,j-1) > center) << 7;
35             code |= (src.at<\_Tp>(i-1,j) > center) << 6;
36             code |= (src.at<\_Tp>(i-1,j+1) > center) << 5;
37             code |= (src.at<\_Tp>(i,j+1) > center) << 4;
38             code |= (src.at<\_Tp>(i+1,j+1) > center) << 3;
39             code |= (src.at<\_Tp>(i+1,j) > center) << 2;
40             code |= (src.at<\_Tp>(i+1,j-1) > center) << 1;
41             code |= (src.at<\_Tp>(i,j-1) > center) << 0;
42             dst.at<\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char}>(i-1,j-1) = code;
43         \}
44     \}
45 \}
\end{DoxyCode}
\index{lbp@{lbp}!V\+A\+R\+L\+B\+P\+\_\+@{V\+A\+R\+L\+B\+P\+\_\+}}
\index{V\+A\+R\+L\+B\+P\+\_\+@{V\+A\+R\+L\+B\+P\+\_\+}!lbp@{lbp}}
\subsubsection[{\texorpdfstring{V\+A\+R\+L\+B\+P\+\_\+(const cv\+::\+Mat \&src, cv\+::\+Mat \&dst, int radius=1, int neighbors=8)}{VARLBP_(const cv::Mat &src, cv::Mat &dst, int radius=1, int neighbors=8)}}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename \+\_\+\+Tp $>$ void lbp\+::\+V\+A\+R\+L\+B\+P\+\_\+ (
\begin{DoxyParamCaption}
\item[{const cv\+::\+Mat \&}]{src, }
\item[{cv\+::\+Mat \&}]{dst, }
\item[{int}]{radius = {\ttfamily 1}, }
\item[{int}]{neighbors = {\ttfamily 8}}
\end{DoxyParamCaption}
)}\label{namespacelbp_a32baee0ff6f7c9703bc16f1e965e7324}
result 

Definition at line 83 of file lbp.\+cpp.


\begin{DoxyCode}
83                                                                          \{
84     
85     std::max(std::min(neighbors,31),1); \textcolor{comment}{// set bounds}
86     dst = cv::Mat::zeros(src.rows-2*radius, src.cols-2*radius, CV\_32FC1); 
87     \textcolor{comment}{// allocate some memory for temporary on-line variance calculations}
88     cv::Mat \_mean = cv::Mat::zeros(src.rows, src.cols, CV\_32FC1);
89     cv::Mat \_delta = cv::Mat::zeros(src.rows, src.cols, CV\_32FC1);
90     cv::Mat \_m2 = cv::Mat::zeros(src.rows, src.cols, CV\_32FC1);
91     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} n=0; n<neighbors; n++) \{
92         \textcolor{comment}{// sample points}
93         \textcolor{keywordtype}{float} x = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(radius) * cos(2.0*M\_PI*n/static\_cast<float>(neighbors));
94         \textcolor{keywordtype}{float} y = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(radius) * -sin(2.0*M\_PI*n/static\_cast<float>(neighbors));
95         \textcolor{comment}{// relative indices}
96         \textcolor{keywordtype}{int} fx = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(floor(x));
97         \textcolor{keywordtype}{int} fy = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(floor(y));
98         \textcolor{keywordtype}{int} cx = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(ceil(x));
99         \textcolor{keywordtype}{int} cy = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(ceil(y));
100         \textcolor{comment}{// fractional part}
101         \textcolor{keywordtype}{float} ty = y - fy;
102         \textcolor{keywordtype}{float} tx = x - fx;
103         \textcolor{comment}{// set interpolation weights}
104         \textcolor{keywordtype}{float} w1 = (1 - tx) * (1 - ty);
105         \textcolor{keywordtype}{float} w2 =      tx  * (1 - ty);
106         \textcolor{keywordtype}{float} w3 = (1 - tx) *      ty;
107         \textcolor{keywordtype}{float} w4 =      tx  *      ty;
108         \textcolor{comment}{// iterate through your data}
109         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i=radius; i < src.rows-radius;i++) \{
110             \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} j=radius;j < src.cols-radius;j++) \{
111                 \textcolor{keywordtype}{float} t = w1*src.at<\_Tp>(i+fy,j+fx) + w2*src.at<\_Tp>(i+fy,j+cx) + w3*src.at<\_Tp>(i+cy,j+fx)
       + w4*src.at<\_Tp>(i+cy,j+cx);
112                 \_delta.at<\textcolor{keywordtype}{float}>(i,j) = t - \_mean.at<\textcolor{keywordtype}{float}>(i,j);
113                 \_mean.at<\textcolor{keywordtype}{float}>(i,j) = (\_mean.at<\textcolor{keywordtype}{float}>(i,j) + (\_delta.at<\textcolor{keywordtype}{float}>(i,j) / (1.0*(n+1)))); \textcolor{comment}{// i
       am a bit paranoid}
114                 \_m2.at<\textcolor{keywordtype}{float}>(i,j) = \_m2.at<\textcolor{keywordtype}{float}>(i,j) + \_delta.at<\textcolor{keywordtype}{float}>(i,j) * (t - \_mean.at<\textcolor{keywordtype}{float}>(i,j)
      );
115             \}
116         \}
117     \}
118     \textcolor{comment}{// calculate result}
119     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = radius; i < src.rows-radius; i++) \{
120         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} j = radius; j < src.cols-radius; j++) \{
121             dst.at<\textcolor{keywordtype}{float}>(i-radius, j-radius) = \_m2.at<\textcolor{keywordtype}{float}>(i,j) / (1.0*(neighbors-1));
122         \}
123     \}
124 \}
\end{DoxyCode}
